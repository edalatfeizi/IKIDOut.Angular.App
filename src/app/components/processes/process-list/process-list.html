<div class="home">
  <div class="container-fluid">
    <div class="page-title">
      <div class="row">
        <div class="col-12 col-sm-6">
          <h3>فرآیند های خروج کالا</h3>
        </div>
        <!-- <div class="col-12 col-sm-6">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="index-kit.html" data-bs-original-title="" title=""> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></a></li>
              <li class="breadcrumb-item">ورژن رنگی</li>
              <li class="breadcrumb-item active">لایه روشن</li>
            </ol>
          </div> -->
      </div>
    </div>
  </div>
  <!-- Container-fluid starts-->
  <div class="container-fluid">
    <div class="row project-cards">
      <div class="col-md-12 project-list">
        <div class="card">
          <div class="row">
            <div class="col-md-6 p-0">
              <ul class="nav nav-tabs border-tab" id="top-tab" role="tablist">
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    id="top-home-tab"
                    data-bs-toggle="tab"
                    href=""
                    (click)="filterProcesses(undefined)"
                    role="tab"
                    aria-controls="top-home"
                    aria-selected="true"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="feather feather-target"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <circle cx="12" cy="12" r="6"></circle>
                      <circle cx="12" cy="12" r="2"></circle></svg
                    >همه</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="contact-top-tab"
                    data-bs-toggle="tab"
                    role="tab"
                    aria-controls="top-contact"
                    aria-selected="false"
                    href=""
                    (click)="filterProcesses(true)"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="feather feather-check-circle"
                    >
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline></svg
                    >فرآیند های فعال</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="profile-top-tab"
                    data-bs-toggle="tab"
                    (click)="filterProcesses(false)"
                    href=""
                    role="tab"
                    aria-controls="top-profile"
                    aria-selected="false"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="feather feather-info"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="12" y1="16" x2="12" y2="12"></line>
                      <line x1="12" y1="8" x2="12" y2="8"></line></svg
                    >فرآیند های غیر فعال</a
                  >
                </li>
              </ul>
            </div>
            <div class="col-md-6 p-0">
              <div class="form-group mb-0 me-0"></div>
              <div class="modal fade" id="exampleModalmdo" tabindex="-1" aria-labelledby="exampleModalLabel" style="display: none;" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">افزودن فرآیند جدید</h5>
                      <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close" data-bs-original-title="" title=""></button>
                    </div>
                    <div class="modal-body">
                      <form>
                        <div class="mb-3">
                          <label class="col-form-label" for="recipient-name">عنوان : </label>
                          <input #newProcessTitle class="form-control" id="recipient-name" type="text" value="" data-bs-original-title="" title="">
                        </div>
                        <div class="mb-3">
                          <label class="col-form-label" for="message-text">توضیحات : </label>
                          <textarea #newProcessDesc class="form-control"></textarea>
                        </div>
                        <span
                        id="terms-error"
                        class="invalid-feedback"
                        style="display: block"
                        [innerHTML]="errorMessage"
                      ></span>
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button #btnCloseModal class="btn btn-secondary"  type="button" data-bs-dismiss="modal" data-bs-original-title="" title="">بستن</button>
                      <div class="btn btn-primary btn-block" 
                      [class.disabled]="isLoading"
                      [class.pointer-events-none]="isLoading"
                      (click)="validateNewProcess(newProcessTitle.value, newProcessDesc.value)" >
                        @if(!isLoading) {
                          <span >ذخیره اطلاعات</span>
                        } @else{
                          <div class="loader-box">
                            <div class="loader-7"></div>
                          </div>
                        }
                        
                      </div>
                    
                      <!-- <button class="btn btn-primary" type="button" data-bs-original-title="" title="">ثبت اطلاعات</button> -->
                    </div>
                 
                  </div>
                </div>
              </div>
              <a href="projectcreate.html" class="btn btn-primary"
              data-bs-toggle="modal" data-bs-target="#exampleModalmdo" data-whatever="@fat" data-bs-original-title="" title=""
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="feather feather-plus-square"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="12" y1="8" x2="12" y2="16"></line>
                  <line x1="8" y1="12" x2="16" y2="12"></line></svg
                >ثبت فرآیند جدید</a
              >
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <div class="tab-content" id="top-tabContent">
              <div
                class="tab-pane fade show active"
                id="top-home"
                role="tabpanel"
                aria-labelledby="top-home-tab"
              >
                <div class="row">
                  @if ((showingFlowcharts$ | async)!.length > 0) {
                  <ng-container
                    *ngFor="
                      let flowchart of showingFlowcharts$ | async;
                      let i = index;
                      trackBy: trackByFlowchartId
                    "
                  >
                  <div class="col-xl-6 xl-100 box-col-12">
                    <div class="card process">
                      <div class="card-header card-no-border">
                        <div class="media media-dashboard">
                          <div class="media-body">
                            <h6 class="f-w-600">{{flowchart.name}}</h6>
                          </div>
                          <div class="icon-box onhover-dropdown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
                            <div class="icon-box-show onhover-show-div">
                              <ul>
                                @if(flowchart!.active){
                                  <li> <a (click)="showDeleteProcessPrompt(flowchart)" data-bs-toggle="modal" data-bs-target="#promptModal">حذف فرآیند</a></li>
                                }@else {
                                  <li> <a (click)="showActivateProcessPrompt(flowchart)" data-bs-toggle="modal" data-bs-target="#promptModal">بازیابی فرآیند</a></li>

                                }
                                
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="job-search"  (click)="showFlowchart(flowchart)">
              
                        <div class="card-body">
                          <div class="media">
                            <img class="process-icon" src="../../../../assets/images/svg/process.svg" alt="process icon" width="24" height="24" />
                            <div class="media-body">
                              <h6 class="f-w-600"><a></a>
                                <!-- <span class="badge badge-primary pull-right">جدید</span> -->
                                <span class="badge pull-right digits"
                                [class.badge-success]="flowchart.active"
                                [class.badge-danger]="!flowchart.active">
                                @if(flowchart.active){
                                  فعال
                                }@else{
                                  غیر فعال
                                }
                              </span>
                              </h6>
                              <p>تعداد زیر فرآیند: {{flowchart.nodes.length}}</p>

                              <!-- <ul class="rating">
                                <li><i class="fa fa-star font-warning"></i></li>
                                <li><i class="fa fa-star font-warning"></i></li>
                                <li><i class="fa fa-star font-warning"></i></li>
                                <li><i class="fa fa-star font-warning"></i></li>
                                <li><i class="fa fa-star font-warning"></i></li>
                              </ul> -->
                            </div>
                        
                          </div>
                    
                          <p>{{flowchart.description}}</p>
                        </div>
                      </div>
                    </div>
                  </div>
           
                  </ng-container>

                  }
                </div>
              </div>
            
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Container-fluid Ends-->
</div>
